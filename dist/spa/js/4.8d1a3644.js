(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"84ea":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[n("CandidatesTableDynamic",{attrs:{models:e.users}})],1)},l=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.models.length?n("RManageModelTable",{staticStyle:{height:"calc(100vh - 50px)"},attrs:{"model-class":e.$MUser,entities:e.models,role:"ibo","merge-fields":e.mergeFields,search:{fields:["name","email","online_events"]},"update-button-props":{formProps:{inputProps:{filled:!0}}}},scopedSlots:e._u([{key:"body-cell-online_events",fn:function(t){return[n("td",{staticClass:"text-left"},[e._l(e.getOnlineEventUsers(t.row),(function(e){return n("OnlineEventUserChip",{key:e.id,attrs:{"online-event-user":e}})})),n("AttachOnlineEventToUserButton",{attrs:{label:"Attach","no-caps":"",rounded:"",unelevated:"",color:"primary",dense:"",padding:"xs sm",user:t.row}})],2)]}}],null,!1,2491923483)}):e._e()},r=[],o=n("5bc0"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-chip",{attrs:{label:e.label,removable:""},on:{remove:e.handleRemove}},[e.removing?n("q-spinner",{staticClass:"q-ml-sm",attrs:{color:"white"}}):e._e()],1)},c=[],d=n("8d35"),u=n.n(d),h={props:{onlineEventUser:{required:!0,type:Object}},components:{},computed:{onlineEvent(){return this.$MOnlineEvent.find(this.onlineEventUser.online_event_id)},label(){const e=u()(this.onlineEvent.start_time).format("ddd, DD MMM");return`${this.onlineEvent.title} - (${e})`}},methods:{handleRemove(){this.removing=!0,this.onlineEventUser.$delete().then(this.handleRemoveSuccess).catch(this.handleRemoveError)},handleRemoveSuccess(){this.removing=!1},handleRemoveError(e){this.removing=!1,this.$emit({color:"red",message:e.message})}},data(){return{removing:!1}}},m=h,v=n("a6c2"),p=n("837a"),_=n("c99e"),g=n("63c1"),f=n.n(g),$=Object(v["a"])(m,a,c,!1,null,null,null),b=$.exports;f()($,"components",{QChip:p["a"],QSpinner:_["a"]});var E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BDialogButton",e._g(e._b({ref:"dialogButton"},"BDialogButton",e.$attrs,!1),e.$listeners),[n("q-card-section",[n("AttachOnlineEventToUserForm",{attrs:{user:e.user},on:{success:function(t){e.$emit("success",t),e.$refs.dialogButton.hide()}}})],1)],1)},O=[],M=n("87a6"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._g(e._b({},"div",e.$attrs,!1),e.$listeners),[n("OnlineEventSelect",{staticStyle:{"min-width":"250px"},attrs:{filled:"",label:"event","option-value":"id","emit-value":"","map-options":""},model:{value:e.online_event_id,callback:function(t){e.online_event_id=t},expression:"online_event_id"}}),n("q-btn",{staticClass:"q-mt-md",attrs:{label:"attach"},on:{click:e.handleAttachClicked}})],1)},U=[],q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-select",e._g(e._b({attrs:{options:e.events,"option-label":e.getLabel,loading:e.fetching}},"q-select",e.$attrs,!1),e.$listeners))},w=[],C={props:{},components:{},computed:{events(){return this.$MOnlineEvent.all()}},mounted(){this.events.length||(this.fetching=!0,this.$MOnlineEvent.$get().then((e=>{this.fetching=!1})).catch((e=>{this.fetching=!1,this.$q.notify({color:"red",message:e.message})})))},methods:{getLabel(e){const t=this.$dayjs(e.start_time).format("ddd DD MMM - hh:ss A");return`${e.title} (${t})`}},data(){return{fetching:!1}}},j=C,x=n("f636"),B=Object(v["a"])(j,q,w,!1,null,null,null),S=B.exports;f()(B,"components",{QSelect:x["a"]});var A={props:{user:{required:!0,type:Object}},components:{OnlineEventSelect:S},computed:{},methods:{handleAttachClicked(){this.$MOnlineEventUser.$create({user_id:this.user.id,online_event_id:this.online_event_id}).then((e=>{this.$emit("success",e)}))}},data(){return{online_event_id:null}}},D=A,k=n("ef9c"),R=Object(v["a"])(D,y,U,!1,null,null,null),T=R.exports;f()(R,"components",{QBtn:k["a"]});var P={props:{user:{required:!0,type:Object}},components:{BDialogButton:M["a"],AttachOnlineEventToUserForm:T},computed:{},methods:{},data(){return{}}},Q=P,F=n("7006"),J=Object(v["a"])(Q,E,O,!1,null,null,null),L=J.exports;f()(J,"components",{QCardSection:F["a"]});var z={props:{models:{required:!0,type:Array}},components:{RManageModelTable:o["a"],OnlineEventUserChip:b,AttachOnlineEventToUserButton:L},computed:{},methods:{getOnlineEventUsers(e){return this.$MOnlineEventUser.query().where("user_id",e.id).all()}},data(){const e=this;return{mergeFields:{online_events:{label:"Online Events",format(t){return e.$MUser.query().with("online_events").find(t.id).online_events.map((e=>e.title)).join(", ")}}}}}},G=z,H=Object(v["a"])(G,i,r,!1,null,null,null),I=H.exports,K={name:"UsersPage",components:{CandidatesTableDynamic:I},created(){this.$MUser.$getCandidates({with:["online_events"]}),this.$MOnlineEvent.$get()},data(){return{initialPagination:{rowsPerPage:50}}},computed:{users(){return this.$MUser.query().where("role","candidate").get()}}},N=K,V=n("505d"),W=Object(v["a"])(N,s,l,!1,null,null,null);t["default"]=W.exports;f()(W,"components",{QPage:V["a"]})}}]);